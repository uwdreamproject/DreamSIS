<% dom_id = "participant_#{participant.id}" %>
<%- report ||= "basics" -%>
<%- @participant_row_index = 1 -%>
<tbody id="<%= dom_id %>" class="filterable">
	
	<%- 
	collection ||= (participant.instance_eval(report.pluralize) rescue []) 
	row_index = 0
	%>
	
	<%- (collection.empty? ? 1 : collection.size).times do -%>
		<%- row_index += 1 -%>
		<%= render :partial => "participants/reports/wrapper", 
					:locals => { 
						:collection => collection, 
						:participant => participant, 
						:report => report, 
						:row_count => (collection.empty? ? 1 : collection.size),
						:row_index => row_index 
					} %>
	<% end %>
	
</tbody>

<% Participant.object_filters.each do |object_filter| %>
	<%= javascript_tag "filterable('#{dom_id}', #{object_filter.id}, #{participant.passes_filter?(object_filter)})" if object_filter.display_now? %>
<% end -%>

<%= draggable_element dom_id, :ghosting => true %>